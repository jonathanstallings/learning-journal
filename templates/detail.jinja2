{% extends "base.jinja2" %}
{% block body %}
  <section id="entry-detail">
    <div class="container">
      <article data-entry-id="{{ entry.id }}">
        <h1>{{ entry.title|safe }}</h1>
        <span class="date">{{ entry.created.strftime('%b. %d, %Y') }}</span>
        {% if request.authenticated_userid %}
        <a id="edit-button" class="button pull-right" href="{{ request.route_url('edit', id=entry.id) }}">Edit</a>
        <div id="twitter-button" class="clearfix pull-right">
          <a href="https://twitter.com/share" class="twitter-share-button" data-via="importJonathan" data-count="none" data-dnt="true">Tweet</a>
          <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
        </div>
        {% endif %}
        <hr />
        <div id="body-text">{{ entry.markdown|safe }}</div>
      </article>
    </div>
  </section>
  {% if request.authenticated_userid %}
  <section id="entry-edit" class="hidden">
    <div class="container">
      <h3>Edit Entry</h3>
      <form action="{{ request.route_url('edit', id=entry.id) }}" method="post">
      <ul>
        <li>
          <label for="title">Title</label>
          <input type="text" name="title" id="title" value="{{ entry.title }}" size="30" maxlength="60" required autofocus/>
        </li>
        <li>
          <label for="text">Text</label>
          <textarea name="text" id="text" cols="60" rows="20" required>{{ entry.text|safe }}</textarea>
        </li>
        <li>
          <div id="form-buttons">
            <input type="submit" id="save-button"  class="button" value="Save" />
            <a class="button" href="{{ request.route_url('detail', id=entry.id) }}">Cancel</a>
          </div>
        </li>
      </ul>
      </form>
    </div>
  </section>
  {% endif %}
{% endblock %}
